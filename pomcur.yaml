# PomCur config file  -*- conf -*-
name: PomCur
long_name: Pombe community curation application

app_version: v29

authentication:
  default_realm: 'members'
  realms:
    members:
      credential:
        class: 'Password'
        password_field: 'password'
        password_type: 'clear'
      store:
        class: DBIx::Class
        user_class: TrackModel::Person

class_info:
  cv:
    class_display_name: controlled vocabulary
    editable: 1
    display_field: name
    field_info_list:
      - name: name
        editable: 1
      - name: definition
        editable: 1
  cvterm:
    class_display_name: controlled vocabulary term
    editable: 1
    display_field: name
    field_info_list:
      - name: name
        editable: 1
      - name: definition
        editable: 1
      - name: cv_id
        editable: 1
  organism:
    editable: 1
    display_field: full_name
    order_by:
      - genus
      - species
    field_info_list:
      - name: genus
        editable: 1
      - name: species
        editable: 1
      - name: ecotypes
        editable: 1
  person:
    object_title_format: 'Details for @@DISPLAY_FIELD@@'
    editable: 1
    display_field: name
    order_by: name
    field_info_list:
      - name: name
        source: name
        editable: 1
      - name: Email address
        source: networkaddress
        editable: 1
      - name: role
        default_value: "'user'"
        editable: 1
        admin_only: 1
      - name: password
        editable: 1
        admin_only: 1
      - name: lab
        editable: 1
  lab:
    editable: 1
    display_field: name
    order_by: name
    field_info_list:
      - name: name
        editable: 1
      - name: lab_head
        editable: 1
      - name: people
        is_collection: 1
        editable: 1
  pub:
    object_title_format: 'Details for PubMed ID: @@$object->pubmedid()@@'
    class_display_name: publication
    display_field: title
    editable: 1
    order_by: "CAST(pubmedid AS integer) DESC"
    field_info_list:
      - name: 'PubMed ID'
        source: pubmedid
        editable: 1
      - name: title
        editable: 1
      - name: authors
        editable: 1
      - name: type
        source: type_id
        editable: 1
  curs:
    class_display_name: curation session
    display_field: curs_key
    editable: 1
    field_info_list:
      - name: community_curator
        editable: 1
      - name: publication
        editable: 0
        source: pub
      - name: curs_key
        editable: 0
# if the hook dies the creation fails
    pre_create_hook: 'PomCur::Track::create_curs_db_hook'

track_db_template_file: db_templates/track_db_template.sqlite3
curs_db_template_file: db_templates/curs_db_template.sqlite3

external_sources:
  pubmed_query_url: 'http://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&retmode=xml&id='

implementation_classes:
  gene_lookup: PomCur::Track::GeneLookup
  go_annotation_lookup: PomCur::Track::GOAnnotationLookup
  go_lookup: PomCur::Track::OntologyLookup

# each class needs to set up the stash for forwarding to a template
# page based on the module name, eg. go_function.html
annotation_types:
  go_function:
    display_name: 'GO molecular functions and biological processes'
    class: 'PomCur::CurModules::GOModule'
    constructor_args:
      ontologies:
        - function
        - process
  go_component:
    display_name: 'GO cellular components or complexes'
    class: 'PomCur::CurModules::GOModule'
    constructor_args:
      ontologies:
        - component
  phenotype:
    display_name: Phenotypes
    class: 'PomCur::CurModules::PhenotypeModule'
#  post_translational_modifications:
#  genetic_interactions:
#  physical_interactions:

messages:
  gene_upload:
    examples:
      gene_identifier: 'SPBC11B10.09'
      gene_name: 'cdc11'

test_config_file: 't/test_config.yaml'
