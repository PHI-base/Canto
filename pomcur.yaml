# PomCur config file  -*- conf -*-
name: PomCur
long_name: Pombe community curation application

app_version: v61

authentication:
  default_realm: 'members'
  realms:
    members:
      credential:
        class: 'Password'
        password_field: 'password'
        password_type: 'clear'
      store:
        class: DBIx::Class
        user_class: TrackModel::Person

db_initial_data:
  track:
    cv:
      - name: cvterm_property_type
        cvterms:
          - name: comment
            dbxref:
              accession: comment
              db:
                name: PomCur Track
      - name: synonym_type
        cvterms:
          - name: broad
            dbxref:
              accession: broad
              db:
                name: PomCur Track
          - name: narrow
            dbxref:
              accession: narrow
              db:
                name: PomCur Track
          - name: exact
            dbxref:
              accession: exact
              db:
                name: PomCur Track
          - name: related
            dbxref:
              accession: related
              db:
                name: PomCur Track

class_info:
  cv:
    class_display_name: controlled vocabulary
    editable: 1
    display_field: name
    field_info_list:
      - name: name
        editable: 1
      - name: definition
        editable: 1
  cvterm:
    class_display_name: controlled vocabulary term
    editable: 1
    display_field: name
    field_info_list:
      - name: name
        editable: 1
      - name: definition
        editable: 1
      - name: cv_id
        editable: 1
  organism:
    editable: 1
    display_field: full_name
    order_by:
      - genus
      - species
    field_info_list:
      - name: genus
        editable: 1
      - name: species
        editable: 1
      - name: ecotypes
        editable: 1
  person:
    object_title_format: 'Details for @@DISPLAY_FIELD@@'
    editable: 1
    display_field: name
    order_by: name
    field_info_list:
      - name: name
        source: name
        editable: 1
      - name: Email address
        source: networkaddress
        editable: 1
      - name: role
        default_value: "'user'"
        editable: 1
        admin_only: 1
      - name: password
        editable: 1
        admin_only: 1
      - name: lab
        editable: 1
  lab:
    editable: 1
    display_field: name
    order_by: name
    field_info_list:
      - name: name
        editable: 1
      - name: lab_head
        editable: 1
      - name: people
        is_collection: 1
        editable: 1
  pub:
    object_title_format: 'Details for PubMed ID: @@$object->pubmedid()@@'
    class_display_name: publication
    display_field: title
    editable: 1
    order_by: "CAST(pubmedid AS integer) DESC"
    field_info_list:
      - name: 'PubMed ID'
        source: pubmedid
        editable: 1
      - name: title
        editable: 1
      - name: authors
        editable: 1
      - name: community_curator
        editable: 1
      - name: type
        source: type_id
        values_constraint: 'cv->name = "PomBase publication type"'
        referenced_class: Cvterm
        editable: 1
  curs:
    class_display_name: curation session
    display_field: curs_key
    editable: 1
    field_info_list:
      - name: community_curator
        editable: 1
      - name: publication
        editable: 0
        source: pub
      - name: curs_key
        editable: 0
# if the hook dies the creation fails
    pre_create_hook: 'PomCur::Track::create_curs_db_hook'
  gene:
    editable: 1
    display_field: primary_identifier
    field_info_list:
      - name: primary_identifier
        editable: 1
      - name: primary_name
        editable: 1
      - name: product
        editable: 1
      - name: genesynonyms
        editable: 1
        is_collection: 1
  genesynonym:
    editable: 1
    display_field: identifier
    field_info_list:
      - name: identifier
        editable: 1
      - name: gene
        editable: 1

track_db_template_file: db_templates/track_db_template.sqlite3
curs_db_template_file: db_templates/curs_db_template.sqlite3
ontology_index_file: ontology_index

external_sources:
  pubmed_query_url: 'http://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&retmode=xml&id='

implementation_classes:
  gene_lookup: PomCur::Track::GeneLookup
  go_annotation_lookup: PomCur::Track::GOAnnotationLookup
  go_lookup: PomCur::Track::OntologyLookup

evidence_types:
  IMP: Inferred from mutant phenotype
  IDA: Inferred from direct assay
  IGI: Inferred from genetic interaction
  IPI: Inferred from physical interaction

# each class needs to set up the stash for forwarding to a template
# page based on the module name, eg. go_function.html
annotation_type_list:
  - name: molecular_function
    display_name: 'GO molecular function'
    class: 'PomCur::CurModules::GOModule'
    constructor_args:
      ontologies:
        - function
    evidence_codes:
      - IMP
      - IDA
      - IGI
      - IPI
  - name: biological_process
    display_name: 'GO biological process'
    class: 'PomCur::CurModules::GOModule'
    constructor_args:
      ontologies:
        - process
    evidence_codes:
      - IMP
      - IDA
      - IGI
      - IPI
  - name: cellular_component
    display_name: 'GO cellular component or complex'
    class: 'PomCur::CurModules::GOModule'
    constructor_args:
      ontologies:
        - component
    evidence_codes:
      - IMP
      - IDA
      - IGI
      - IPI
  - name: phenotype
    display_name: Phenotypes
    class: 'PomCur::CurModules::PhenotypeModule'
    disabled: 1
  - name: post_translational_modifications
    display_name: "Post translational modifications"
    disabled: 1
  - name: genetic_interactions
    display_name: "Genetic Interactions"
    disabled: 1
  - name: physical_interactions
    display_name: "Physical Interactions"
    disabled: 1

messages:
  gene_upload:
    examples:
      gene_identifier: 'SPCC1739.10'
      gene_name: 'cdc11'

test_config_file: 't/test_config.yaml'

help_text:
  inline:
    molecular_function_hint: |
      A molecular function is a molecular level activity usually, but not always
      performed by a single gene product (catalytic activity, binding,
      transporter)
    biological_process_hint: |
      A biological process is a series of events accomplished by one or more
      ordered assemblies of molecular functions (cell cycle, transcription)
    cellular_component_hint: |
      A cellular component is a part of a cell (proteasome, nucleus)
