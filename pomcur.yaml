# PomCur config file  -*- conf -*-
name: PomCur
long_name: Pombe community curation application

app_version: v135

authentication:
  default_realm: 'members'
  realms:
    members:
      credential:
        class: 'Password'
        password_field: 'password'
        password_type: 'clear'
      store:
        class: DBIx::Class
        user_class: TrackModel::Person

view_options:
  max_inline_results_length: 100

# see PomCur::Meta::Util::initialise_core_data()
db_initial_data:
  track:
    cv:
      - name: organismprop_types
        cvterms:
          - name: taxonId
            dbxref:
              accession: taxonId
              db:
                name: PomCur Track
      - name: cvterm_property_type
        cvterms:
          - name: comment
            dbxref:
              accession: comment
              db:
                name: PomCur Track
      - name: synonym_type
        cvterms:
          - name: broad
            dbxref:
              accession: broad
              db:
                name: PomCur Track
          - name: narrow
            dbxref:
              accession: narrow
              db:
                name: PomCur Track
          - name: exact
            dbxref:
              accession: exact
              db:
                name: PomCur Track
          - name: related
            dbxref:
              accession: related
              db:
                name: PomCur Track
      - name: PomCur publication type
        cvterms:
          - name: unknown
            dbxref:
              accession: unknown
              db:
                name: PomCur Track
      - name: PomCur publication triage status
        cvterms:
          - name: New
            dbxref:
              accession: new
              db:
                name: PomCur Track
          - name: Curatable
            definition: Triage status for papers that can be curated.
            dbxref:
              accession: curatable
              db:
                name: PomCur Track
          - name: Not english
            definition: |
                Triage status for a paper that will not be curated because
                the text is not in English.
            dbxref:
              accession: not_english
              db:
                name: PomCur Track
          - name: Methods paper
            definition: |
                Triage status for a paper that will not be curated because it
                is a methods paper.
            dbxref:
              accession: methods_paper
              db:
                name: PomCur Track
          - name: Wrong organism
            definition: |
                Triage status for a paper that will not be curated because the
                organism is not appropriate for this database.
            dbxref:
              accession: wrong_organism
              db:
                name: PomCur Track
          - name: News and views
            definition: |
                Triage status for a publication that will not be curated because
                it is an editorial, a comment or a news and views article.
            dbxref:
              accession: news_and_views
              db:
                name: PomCur Track
          - name: Other
            definition: |
                Triage status for a publication that will not be curated for
                a reason the is not covered by the other statuses.
            dbxref:
              accession: other
              db:
                name: PomCur Track
      - name: PomCur user types
        cvterms:
          - name: user
            dbxref:
              accession: user
              db:
                name: PomCur Track
          - name: admin
            dbxref:
              accession: admin
              db:
                name: PomCur Track
      - name: PomCur publication curation status
        cvterms:
          - name: not started
            dbxref:
              accession: admin
              db:
                name: PomCur Track
          - name: complete
            dbxref:
              accession: admin
              db:
                name: PomCur Track
      - name: PomCur publication experiment types
        cvterms:
          - name: Genome wide
            dbxref:
              accession: genome_wide
              db:
                name: PomCur Track
          - name: High throughput
            dbxref:
              accession: high_throughput
              db:
                name: PomCur Track
          - name: Computational analysis
            dbxref:
              accession: computational_analysis
              db:
                name: PomCur Track
      # possibilities for the type_id of pubprops
      - name: PomCur publication property types
        cvterms:
          - name: experiment_type
            dbxref:
              accession: experiment_type
              db:
                name: PomCur Track

class_info:
  track:
    cv:
      class_display_name: controlled vocabulary
      editable: 1
      display_field: name
      field_info_list:
        - name: name
          editable: 1
        - name: definition
          editable: 1
    cvterm:
      class_display_name: controlled vocabulary term
      editable: 1
      display_field: name
      field_info_list:
        - name: name
          editable: 1
        - name: definition
          editable: 1
        - name: cv_id
          editable: 1
    organism:
      editable: 1
      display_field: full_name
      order_by:
        - genus
        - species
      field_info_list:
        - name: genus
          editable: 1
        - name: species
          editable: 1
    person:
      object_title_format: 'Details for @@DISPLAY_FIELD@@'
      editable: 1
      display_field: name
      order_by: name
      field_info_list:
        - name: name
          source: name
          editable: 1
        - name: Email address
          source: email_address
          editable: 1
        - name: role
          default_value: "'user'"
          values_constraint: 'where me.cv_id = (SELECT cv_id FROM cv where cv.name = "PomCur user types")'
          editable: 1
          admin_only: 1
        - name: password
          editable: 1
          admin_only: 1
        - name: lab
          editable: 1
    lab:
      editable: 1
      display_field: name
      order_by: name
      field_info_list:
        - name: name
          editable: 1
        - name: lab_head
          editable: 1
        - name: people
          is_collection: 1
          editable: 1
    pub:
      object_title_format: 'Details for publication: @@$object->uniquename()@@'
      class_display_name: publication
      display_field: uniquename
      editable: 1
      # hack to order by pubmed id, or by doi number
      order_by: "cast((case me.uniquename like 'PMID:%' WHEN 1 THEN substr(me.uniquename, 6) ELSE me.uniquename END) as integer)"
      field_info_list:
        - name: 'Publication ID'
          source: uniquename
          editable: 1
        - name: title
          editable: 1
        - name: authors
          editable: 1
        - name: assigned_curator
          editable: 1
        - name: type
          source: type_id
          values_constraint: 'where me.cv_id = (SELECT cv_id FROM cv where cv.name = "PomCur publication type")'
          referenced_class: Cvterm
          editable: 1
        - name: triage_status
          source: triage_status_id
          values_constraint: 'where me.cv_id = (SELECT cv_id FROM cv where cv.name = "PomCur publication triage status")'
          referenced_class: Cvterm
          editable: 1
    pub_curation_status:
      class_display_name: publication curation status
      display_field: status_summary
      editable: 1
      field_info_list:
        - name: publication
          source: pub_id
          editable: 1
        - name: annotation_type
          editable: 1
        - name: status
          source: status_id
          values_constraint: 'where me.cv_id = (SELECT cv_id FROM cv where cv.name = "PomCur publication curation status")'
          referenced_class: Cvterm
          editable: 1
    pubprop:
      class_display_name: publication properties
      display_field: value
      editable: 1
      field_info_list:
        - name: publication
          source: pub_id
          editable: 1
        - name: type_id
          values_constraint: 'where me.cv_id = (SELECT cv_id FROM cv where cv.name = "PomCur publication experiment types")'
          referenced_class: Cvterm
          editable: 1
        - name: value
          editable: 1
    curs:
      class_display_name: curation session
      display_field: curs_key
      editable: 1
      field_info_list:
        - name: curator
          editable: 1
        - name: publication
          editable: 0
          source: pub
        - name: curs_key
          editable: 0
# if the hook dies the creation fails
      pre_create_hook: 'PomCur::Track::create_curs_db_hook'
    gene:
      editable: 1
      display_field: primary_identifier
      field_info_list:
        - name: primary_identifier
          editable: 1
        - name: primary_name
          editable: 1
        - name: product
          editable: 1
        - name: genesynonyms
          editable: 1
          is_collection: 1
    genesynonym:
      editable: 1
      display_field: identifier
      field_info_list:
        - name: identifier
          editable: 1
        - name: gene
          editable: 1
  chado:
    cv:
      class_display_name: controlled vocabulary
      editable: 1
      display_field: name
      field_info_list:
        - name: name
          editable: 1
        - name: definition
          editable: 1
    cvterm:
      class_display_name: controlled vocabulary term
      editable: 1
      display_field: name
      field_info_list:
        - name: name
          editable: 1
        - name: definition
          editable: 1
        - name: cv
          source: cv_id
          editable: 1
    organism:
      editable: 1
      display_field: full_name
      order_by:
        - genus
        - species
      field_info_list:
        - name: genus
          editable: 1
        - name: species
          editable: 1
    pub:
      object_title_format: 'Details for publication ID: @@$object->uniquename()@@'
      class_display_name: publication
      display_field: title
      editable: 1
      field_info_list:
        - name: title
          editable: 1
        - name: uniquename
          editable: 1
        - name: type
          source: type_id
          values_constraint: 'where me.cv_id = (SELECT cv_id FROM cv where cv.name = "genedb_literature")'
          referenced_class: Cvterm
          editable: 1
    feature:
      editable: 1
      display_field: uniquename
      search_fields:
        - uniquename
        - name
      field_info_list:
        - name: uniquename
          editable: 1
        - name: name
          editable: 1
        - name: type
          source: type_id
          values_constraint: 'where me.cv_id = (SELECT cv_id FROM cv where cv.name = "sequence")'
          referenced_class: Cvterm
          editable: 1
        - name: featureprops
          is_collection: 1
          editable: 1
    featureprop:
      editable: 1
      display_field: value
      field_info_list:
        - name: type
          source: type_id
          referenced_class: Cvterm
        - name: value
          editable: 1

export:
  gene_association_fields:
    db: "GeneDB_Spombe"
    assigned_by: "GeneDB_Spombe"
    db_object_type: gene

track_db_template_file: db_templates/track_db_template.sqlite3
curs_db_template_file: db_templates/curs_db_template.sqlite3
ontology_index_file: ontology_index

external_sources:
  pubmed_efetch_url: 'http://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&retmode=xml&id='
  pubmed_esearch_url: 'http://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi?db=pubmed&remode=xml&term='

implementation_classes:
  gene_adaptor: PomCur::Track::GeneLookup
  go_annotation_adaptor: PomCur::Track::GOAnnotationLookup
  go_adaptor: PomCur::Track::OntologyLookup

evidence_types:
  IMP:
    name: Inferred from mutant phenotype
  IDA:
    name: Inferred from direct assay
  IGI:
    name: Inferred from genetic interaction
    with_gene: 1
  IPI:
    name: Inferred from physical interaction
    with_gene: 1

# each class needs to set up the stash for forwarding to a template
# page based on the module name, eg. go_function.html
annotation_type_list:
  - name: molecular_function
    abbreviation: F
    very_short_display_name: 'function'
    short_display_name: 'molecular function'
    display_name: 'GO molecular function'
    class: 'PomCur::CurModules::GOModule'
    constructor_args:
      ontologies:
        - function
    evidence_codes:
      - IMP
      - IDA
      - IGI
      - IPI
    broad_term_suggestions: |
      transporter, transferase activity
    specific_term_examples: |
      adenylate cyclase activity or biotin transporter activity
    help_text: |
      A molecular function is an activity, such as a catalytic or binding
      activitiy, that occurs at the molecular level. GO molecular function
      terms represent activities that perform the actions (protein
      serine/threonine kinase activity, pyruvate carboxylase activity),
      rather than the entities (gene products or complexes).
    more_help_text: |
      As a general rule, molecular functions  correspond to single step
      activities performed by individual gene products.
  - name: biological_process
    abbreviation: P
    very_short_display_name: 'process'
    short_display_name: 'biological process'
    display_name: 'GO biological process'
    class: 'PomCur::CurModules::GOModule'
    constructor_args:
      ontologies:
        - process
    evidence_codes:
      - IMP
      - IDA
      - IGI
      - IPI
    broad_term_suggestions: |
      cell cycle, transport
    specific_term_examples: |
      pyrimidine metabolic process or alpha-glucoside transport
    help_text: |
      A biological process is series of events accomplished by one or more
      ordered assemblies of molecular functions.
    more_help_text: |
      It can be difficult to distinguish between a biological process
      and a molecular function, but the general rule is that a process must
      have more than one distinct steps (eg. cell cycle, transport, signal
      transduction).
    suggest_term_help_text: |
      A new term should be differentiated from the parent as a "sub term"  by
      the mechanism of action, or the genes which are required to perform the
      action. It should not be differentiated only by its target gene
      products. For example, histone H2A-S121 phosphorylation
      is a valid term request because it is performed by a set of genes
      specific for this process, translation of histone H2a is not a valid
      term request because there is no translation machinery specifically for
      histone H2a.
  - name: cellular_component
    abbreviation: C
    very_short_display_name: 'component'
    short_display_name: 'cellular component'
    display_name: 'GO cellular component'
    class: 'PomCur::CurModules::GOModule'
    constructor_args:
      ontologies:
        - component
    evidence_codes:
      - IMP
      - IDA
      - IGI
      - IPI
    broad_term_suggestions: |
      rough endoplasmic reticulum, nucleus, ribosome
    specific_term_examples: |
      condensed nuclear chromosome, inner kinetochore and GET complex
    help_text: |
      Cellular component describes locations, at the levels of
      subcellular structures and macromolecular complexes. Examples of
      cellular components include nucleus, nuclear inner membrane, nuclear
      pore, and proteasome complex.
    more_help_text: |
      Generally, a gene product is located in or is a subcomponent of a
      particular cellular component. The cellular component ontology includes
      multi-subunit enzymes and other protein complexes, but not individual
      proteins or nucleic acids. Cellular component also does not include
      multicellular anatomical terms.
  - name: phenotype
    display_name: Phenotypes
    class: 'PomCur::CurModules::PhenotypeModule'
    disabled: 1
    broad_term_suggestions: |
      PLACEHOLDER
    help_text: |
      PLACEHOLDER
    more_help_text: |
      ADD ME!
  - name: post_translational_modifications
    display_name: "Post translational modifications"
    disabled: 1
    broad_term_suggestions: |
      PLACEHOLDER
    help_text: |
      PLACEHOLDER
    more_help_text: |
      ADD ME!
  - name: genetic_interactions
    display_name: "Genetic Interactions"
    disabled: 1
    broad_term_suggestions: |
      PLACEHOLDER
    help_text: |
      PLACEHOLDER
    more_help_text: |
      ADD ME!
  - name: physical_interactions
    display_name: "Physical Interactions"
    disabled: 1
    broad_term_suggestions: |
      PLACEHOLDER
    help_text: |
      PLACEHOLDER
    more_help_text: |
      ADD ME!

messages:
  gene_upload:
    examples:
      gene_identifier: 'SPCC1739.10'
      gene_name: 'cdc11'

test_config_file: 't/test_config.yaml'

help_text:
  inline:
    molecular_function_hint: |
      A molecular function is a molecular level activity usually, but not always
      performed by a single gene product (catalytic activity, binding,
      transporter)
    biological_process_hint: |
      A biological process is a series of events accomplished by one or more
      ordered assemblies of molecular functions (cell cycle, transcription)
    cellular_component_hint: |
      A cellular component is a part of a cell (proteasome, nucleus)
