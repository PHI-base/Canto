<div id="curs-genotype-manage" class="genotype-list ng-cloak container">
    <div class="row" ng-if="display">
        <div class="col-md-6">
            <metagenotype-genotype-picker is-pathogen="true" genotype-model="pathogenModel" callback="pathogenCallback"></metagenotype-organism-picker>
        </div>
        <div class="col-md-6">
            <metagenotype-genotype-picker is-pathogen="false" genotype-model="hostModel" callback="hostCallback"></metagenotype-organism-picker>
        </div>
    </div>
    <div class="row">
        <button ng-click="toGenotype()" type="button" class="btn btn-primary curs-back-button">
            &lt;-- Back to Genotypes
        </button>
        <button
            ng-click="createMetaGenotype()"
            type="button"
            class="btn btn-primary curs-back-button"
            ng-disabled="makeInvalid"
            ng-if="display">
            Make it --&gt;
        </button>
    </div>
    <div ng-if="metagenotypes.length">
        <div class="row">
            <div class="col-md-12">
                <h3>Meta-Genotypes</h3>
                <div class="jumbotron" ng-repeat="meta in metagenotypes">
                    <div class="row">
                        <metagenotype-summary-item type="Pathogen" genotype="meta.pathogen_genotype"></metagenotype-summary-item>
                        <metagenotype-summary-item type="Host" genotype="meta.host_genotype"></metagenotype-summary-item>
                    </div>
                    <div class="row">
                        <div class="col-md-10">{{ getAnnotationsById(meta.metagenotype_id).length }} annotations</div>
                        <div class="col-md-2">
                            <button type="button" class="btn btn-primary" ng-click="isCollapsed = !isCollapsed">
                                -&gt;
                            </button>
                        </div>
                    </div>
                    <div uib-collapse="isCollapsed">
                        <div class="row">
                            <metagenotype-list-row-links metagenotypes="metagenotypes" metagenotype-id="meta.metagenotype_id"
                                allele-count="0"
                                annotation-count="0">
                            </metagenotype-list-row-links>
                        </div>
                        <div class="row">
                            <div ng-repeat="annotation in getAnnotationsById(meta.metagenotype_id)">
                                <annotation-table
                                    annotation-type-name="disease_formation_phenotype"
                                    annotations="[annotation]"
                                    feature-status-filter="existing"
                                    feature-filter-display-name="Sunshine">
                                </annotation-table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
