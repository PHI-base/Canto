<%args>
$title
$error => undef
$message => undef
</%args>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
  <head>
    <& head.mhtml, title => $title &>
  </head>
  <body>
    <& header.mhtml &>

<div id="error-list">
% if (defined $error) {
<div class="error">
% if (ref $error) {
  <strong>
    <% $error->{title} %>
  </strong>
%   if (exists $error->{text}) {
  <div>
    <% $error->{text} %>
  </div>
%   }
% } else {
  <strong>
    <% $error %>
  </strong>
% }
</div>
% }
</div>

<div id="message-list">
% if (defined $message) {
<div class="message">
% if (ref $message) {
  <strong>
    <% $message->{title} %>
  </strong>
%   if (exists $message->{text}) {
  <div>
    <% $message->{text} %>
  </div>
%   }
% } else {
  <strong>
    <% $message %>
  </strong>
% }
</div>
% }
</div>

      <div id="content">
        <div>
          <div id="page-description">
            <% $title %>
          </span>
        </div>
% $m->call_next;
      </div>
    </div>
    <& footer.mhtml &>
  </body>
</html>

<%init>
# flash_to_stash doesn't seem to work, so:
$error ||= $c->flash->{error};
$message ||= $c->flash->{message};
</%init>
