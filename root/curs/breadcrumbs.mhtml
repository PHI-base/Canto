<div id="breadcrumbs">
  <div class="breadcrumbs-link">
    <a id="breadcrumbs-home-link"
       href="<% $instance_top_uri %>" title="Go to <% $instance_text %>">
      <% $instance_text %>
    </a>
  <div id="breadcrumbs-gene-summary-link" class="breadcrumbs-link">
    <a href="<% $curs_root_uri %>" title="Go to the home page">
      <% defined $pub ? $pub->uniquename() : "UNKNOWN PUBLICATION" %> summary
    </a>
% if (defined $feature_url) {
    <div id="breadcrumbs-gene-link" class="breadcrumbs-link">
      <a href="<% $feature_url %>" title="<% $display_name %>">
      <% $display_name %>
      </a>
    </div>
% }
  </div>
</div>
</div>

<%init>
my $config = $c->config();
my $feature_id;
my $feature_type;
my $display_name;

if ($c->stash()->{gene}) {
  my $gene = $c->stash()->{gene};
  $feature_id = $gene->gene_id();
  $feature_type = 'gene';
  $display_name = $gene->display_name();
}
if ($c->stash()->{genotype}) {
  my $genotype = $c->stash()->{genotype};
  $feature_id = $genotype->genotype_id();
  $feature_type = 'genotype';
  $display_name = $genotype->display_name();
}

my $pub = $c->stash()->{pub};
my $curs_root_uri = $c->stash()->{curs_root_uri};
my $instance_text;
if (defined $config->{database_name}) {
  $instance_text = $config->{database_name} . ' ' . $config->{name};
} else {
  $instance_text = $config->{name};
}
my $instance_top_uri = $c->uri_for('/');
my $feature_url;

if (defined $feature_id) {
  $feature_url = "$curs_root_uri/feature/$feature_type/view/$feature_id";
}
</%init>
