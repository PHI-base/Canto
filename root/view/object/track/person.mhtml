<%args>
$object
$class_info
</%args>

<& /view/object/object_top.mhtml, object => $object, class_info => $class_info &>

<div id="collections">
  <& /view/collection.mhtml, object => $object, collection_name => 'pubs',
    collection_title => 'Publications assigned to this person' &>
  <& /view/collection.mhtml, object => $object, collection_name => 'curs',
    collection_title => 'Sessions assigned to this person' &>
  <& /view/inline_list.mhtml, config_name => 'curs', rs => $approving_curs_rs,
                       class_info => $class_info,
                       list_title => 'Sessions being approved by ' . $object->name() &>
</div>

<%init>
my $approving_curs_rs =
  $c->schema()->resultset('Curs')->search(
    \[qq{me.curs_id in (select curs from cursprop p, cvterm t where
       t.cvterm_id = p.type and t.name = 'approver_name' and p.value = ?)},
       ['p.value', $object->name()]]);
</%init>
